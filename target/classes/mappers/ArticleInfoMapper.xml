<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--城市表数据库操作-->
<mapper namespace="dao.ArticleInfoDao">
    <resultMap id="ArticleInfoResultMap" type="entity.ArticleInfo">
        <id column="id" property="id"/>
        <result column="type_id" property="typeId"/>
        <result column="phone" property="phone"/>
        <result column="user_id" property="userId"/>
        <result column="find_time" property="findTime"/>
        <result column="address_content" property="addressContent"/>
        <result column="description" property="description"/>
        <result column="status" property="status"/>
        <result column="imgStr" property="imgStr"/>
        <result column="record_status" property="recordStatus"/>
        <result column="helper_id" property="helperId"/>
        <result column="back_time" property="backTime"/>
        <result column="create_time" property="createTime"/>
        <result column="last_edit_time" property="lastEditTime"/>
    </resultMap>

    <select id="queryArticleInfo" resultMap="ArticleInfoResultMap">
        SELECT * FROM lf_article_info
        <where>
            <if test="userId!=-1">
                and user_id = #{userId}
            </if>
            <if test="typeId!=-1">
                and type_id = #{typeId}
            </if>

            <if test="status!=-1">
                and status = #{status}
            </if>
            <if test="recordStatus!=-1">
                and record_status = #{recordStatus}
            </if>
            <if test="addressContent!=null">
                and address_content LIKE "%"#{addressContent}"%"
            </if>
            <if test="description!=null">
                and description LIKE  "%"#{description}"%"
            </if>
        </where>
        ORDER BY create_time DESC
        LIMIT #{start} ,#{pageSize}
    </select>

    <insert id="insert" parameterType="entity.ArticleInfo">
        INSERT INTO
        lf_article_info(id,type_id,user_id,phone,find_time,address_content
                        ,description,status,imgStr,record_status,create_time)
        VALUES
        (#{id},#{typeId},#{userId},#{phone},#{findTime},#{addressContent}
        ,#{description},#{status},#{imgStr},#{recordStatus},#{createTime})
    </insert>

    <!--    <update id="update">-->

    <!--    </update>-->
</mapper>